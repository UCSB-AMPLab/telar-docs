---
---
{%- comment -%} Find equivalent page in other language {%- endcomment -%}
{% if page.lang == "es" %}
  {% assign current_lang = "es" %}
  {% assign other_lang = "en" %}
  {% assign equivalent_path = page.path | replace: ".es.md", ".md" %}
  {% assign fallback_url = "/docs/" %}
{% else %}
  {% assign current_lang = "en" %}
  {% assign other_lang = "es" %}
  {% assign equivalent_path = page.path | replace: ".md", ".es.md" %}
  {% assign fallback_url = "/guia/" %}
{% endif %}
{% assign equivalent_page = site.html_pages | where: "path", equivalent_path | first %}
{% if equivalent_page %}
  {% assign other_url = equivalent_page.url | relative_url %}
{% else %}
  {% assign other_url = fallback_url | relative_url %}
{% endif %}
<!DOCTYPE html>
<html lang="{{ current_lang }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title }} | {{ site.title }}</title>
  <meta name="description" content="{{ page.description | default: site.description }}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,400;0,700;1,400&family=Space+Grotesk:wght@400;600;700&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link href="{{ '/pagefind/pagefind-ui.css' | relative_url }}" rel="stylesheet">
  <script src="{{ '/pagefind/pagefind-ui.js' | relative_url }}"></script>
  {% for css in page.extra_css %}
  <link href="{{ '/assets/css/' | append: css | append: '.css' | relative_url }}" rel="stylesheet">
  {% endfor %}
  {% seo %}

  <style>
    :root {
      /* Telar identity colours */
      --terracotta: #883C36;
      --dark-grey: #333333;
      --lavender: #C6D0F8;
      --gold: #DAB95C;
      --cream: #FFF6EF;

      /* Text colors */
      --text-dark: #333333;
      --text-medium: #6C7A89;
      --text-light: #AEB3BB;

      /* Backgrounds */
      --bg-white: #ffffff;
      --bg-light: #f8f9fa;
      --bg-sidebar: #fafafa;

      /* Layout */
      --sidebar-width: clamp(380px, 28vw, 450px);
      --header-height: 60px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Roboto Condensed', -apple-system, BlinkMacSystemFont, sans-serif;
      font-weight: 400;
      line-height: 1.6;
      color: var(--text-dark);
      background: var(--bg-white);
    }

    /* Header */
    .docs-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: var(--header-height);
      background: var(--terracotta);
      border-bottom: 2px solid transparent;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      z-index: 100;
    }

    .docs-header__left {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .docs-header__logo {
      height: 32px;
      width: auto;
      display: block;
    }

    .docs-header__brand {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
    }

    .docs-header__title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 28px;
      font-weight: 400;
      color: var(--cream);
    }

    .docs-header__center {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .docs-header__right {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    /* Language Toggle */
    .lang-toggle {
      display: flex;
      gap: 4px;
    }

    .lang-toggle button {
      padding: 6px 14px;
      border: 1px solid rgba(255,255,255,0.3);
      background: transparent;
      cursor: pointer;
      border-radius: 50px;
      font-family: 'Roboto Condensed', sans-serif;
      font-size: 13px;
      font-weight: 500;
      color: rgba(255,255,255,0.7);
      transition: all 0.2s;
    }

    .lang-toggle button.active {
      background: var(--cream);
      color: var(--terracotta);
      border-color: var(--cream);
    }

    .lang-toggle button:hover:not(.active) {
      border-color: rgba(255,255,255,0.6);
      color: white;
    }

    /* Aux Links */
    .aux-links {
      display: flex;
      gap: 16px;
    }

    .aux-links a {
      color: rgba(255,255,255,0.8);
      text-decoration: none;
      font-size: 15px;
      font-weight: 500;
    }

    .aux-links a:hover {
      color: white;
    }

    /* Mobile Menu Button */
    .menu-button {
      display: none;
      background: none;
      border: none;
      cursor: pointer;
      padding: 8px;
    }

    .menu-button svg {
      width: 24px;
      height: 24px;
      color: var(--cream);
    }

    /* Sidebar */
    .docs-sidebar {
      position: fixed;
      top: var(--header-height);
      left: 0;
      bottom: 0;
      width: var(--sidebar-width);
      background: var(--cream);
      border-right: 1px solid rgba(136,60,54,0.12);
      overflow-y: auto;
      padding: 24px 0;
      z-index: 50;
    }

    /* Navigation */
    .docs-nav {
      padding: 0 16px;
    }

    .nav-section {
      margin-bottom: 24px;
    }

    .nav-section-title {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-light);
      padding: 0 12px;
      margin-bottom: 8px;
    }

    .nav-list {
      list-style: none;
    }

    .nav-item {
      margin: 0;
    }

    .nav-link {
      display: block;
      padding: 4px 12px;
      color: var(--text-medium);
      text-decoration: none;
      font-size: 16px;
      border-radius: 8px;
      border-left: 4px solid transparent;
      transition: all 0.15s;
    }

    .nav-link:hover {
      color: var(--terracotta);
      background: rgba(0,0,0,0.04);
    }

    .nav-link.active {
      color: var(--dark-grey);
      background: rgba(218,185,92,0.3);
      font-weight: 600;
      border-left: 4px solid transparent;
    }

    /* .nav-link.expanded - no styling, parent items not highlighted */

    /* Nested navigation */
    .nav-children {
      list-style: none;
      padding-left: 12px;
      margin-top: 4px;
    }

    .nav-children .nav-link {
      font-size: 15px;
      padding: 3px 12px;
    }

    /* Language filtering */
    [data-lang="es"] { display: none; }
    html[lang="es"] [data-lang="en"] { display: none; }
    html[lang="es"] [data-lang="es"] { display: block; }

    /* Search */
    .docs-search {
      padding: 16px;
      border-bottom: 1px solid var(--lavender);
    }

    /* Pagefind UI customization */
    .docs-search .pagefind-ui {
      --pagefind-ui-scale: 0.9;
      --pagefind-ui-primary: var(--terracotta);
      --pagefind-ui-text: var(--text-dark);
      --pagefind-ui-background: var(--bg-white);
      --pagefind-ui-border: #d0d5db;
      --pagefind-ui-border-width: 1px;
      --pagefind-ui-border-radius: 24px;
      --pagefind-ui-font: 'Roboto Condensed', sans-serif;
    }

    .docs-search .pagefind-ui__search-input {
      font-size: 14px;
      padding: 10px 16px 10px 44px;
    }

    .docs-search .pagefind-ui__search-clear {
      border-radius: 50%;
    }

    .docs-search .pagefind-ui__result-link {
      color: var(--terracotta);
    }

    .docs-search .pagefind-ui__result-excerpt {
      font-size: 13px;
    }

    /* Main Content */
    .docs-main {
      margin-left: var(--sidebar-width);
      margin-top: var(--header-height);
      min-height: calc(100vh - var(--header-height));
    }

    .docs-content {
      max-width: clamp(600px, 50vw, 900px);
      margin: 0 auto;
      padding: 40px 48px;
    }

    /* Typography */
    .docs-content h1,
    .docs-content h2,
    .docs-content h3,
    .docs-content h4,
    .docs-content h5,
    .docs-content h6 {
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 600;
      line-height: 1.3;
      color: var(--text-dark);
    }

    .docs-content h1 {
      font-size: 2.25rem;
      margin-bottom: 1.5rem;
    }

    .docs-content h2 {
      font-size: 1.75rem;
      margin-top: 2.5rem;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--lavender);
    }

    .docs-content h3 {
      font-size: 1.375rem;
      margin-top: 2rem;
      margin-bottom: 0.75rem;
    }

    .docs-content h4 {
      font-size: 1.125rem;
      margin-top: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .docs-content p {
      margin-bottom: 1rem;
    }

    .docs-content ul,
    .docs-content ol {
      margin-bottom: 1rem;
      padding-left: 1.5rem;
    }

    .docs-content li {
      margin-bottom: 0.5rem;
    }

    .docs-content a {
      color: var(--terracotta);
      text-decoration: underline;
      text-decoration-color: rgba(136, 60, 54, 0.3);
      text-underline-offset: 2px;
    }

    .docs-content a:hover {
      text-decoration-color: var(--terracotta);
    }

    /* Images - extend beyond text column on large screens */
    .docs-content img {
      max-width: calc(100% + 300px);
      width: calc(100% + 300px);
      margin-left: -150px;
      margin-right: -150px;
      height: auto;
      border-radius: 4px;
      margin-top: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .docs-content p > img {
      display: block;
    }

    @media (max-width: 1200px) {
      .docs-content img {
        max-width: calc(100% + 150px);
        width: calc(100% + 150px);
        margin-left: -75px;
        margin-right: -75px;
      }
    }

    @media (max-width: 1000px) {
      .docs-content img {
        max-width: calc(100% + 60px);
        width: calc(100% + 60px);
        margin-left: -30px;
        margin-right: -30px;
      }
    }

    @media (max-width: 900px) {
      .docs-content img {
        max-width: 100%;
        width: 100%;
        margin-left: 0;
        margin-right: 0;
      }
    }

    /* Code */
    .docs-content code {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 0.875em;
      background: rgba(198, 208, 248, 0.2);
      border: 1px solid rgba(198, 208, 248, 0.4);
      padding: 0.2em 0.4em;
      border-radius: 3px;
    }

    .docs-content pre {
      background: #f8f9fa;
      border-left: 3px solid rgba(198, 208, 248, 0.5);
      padding: 16px 20px;
      overflow-x: auto;
      margin-bottom: 1.5rem;
    }

    .docs-content pre code {
      background: none;
      padding: 0;
      font-size: 0.85rem;
      line-height: 1.5;
    }

    /* Tables */
    .docs-content table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 1.5rem;
    }

    .docs-content th,
    .docs-content td {
      padding: 10px 12px;
      text-align: left;
      border-bottom: 1px solid #e9ecef;
    }

    .docs-content th {
      font-weight: 600;
      background: #f8f9fa;
    }

    /* Callouts */
    .docs-content blockquote {
      border-left: 4px solid var(--gold);
      padding: 12px 20px;
      margin: 1.5rem 0;
      background: var(--cream);
      color: var(--text-dark);
      border-radius: 12px;
    }

    .docs-content blockquote.warning {
      border-left-color: var(--terracotta);
    }

    .docs-content blockquote > :last-child {
      margin-bottom: 0;
    }

    /* Footer */
    .docs-footer {
      margin-top: 60px;
      padding-top: 24px;
      border-top: 1px solid var(--lavender);
      color: var(--text-light);
      font-size: 14px;
    }

    /* Mobile Styles */
    @media (max-width: 1024px) {
      .docs-content {
        padding: 32px 24px;
      }
    }

    @media (max-width: 768px) {
      .menu-button {
        display: block;
        padding: 10px;
      }

      .menu-button svg {
        width: 28px;
        height: 28px;
      }

      .docs-header__center {
        display: none;
      }

      .aux-links {
        display: none;
      }

      .docs-sidebar {
        width: 85vw;
        max-width: 320px;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }

      .docs-sidebar.open {
        transform: translateX(0);
      }

      .docs-main {
        margin-left: 0;
      }

      .docs-content {
        padding: 24px 16px;
      }

      .docs-content h1 {
        font-size: 1.75rem;
      }

      .docs-content h2 {
        font-size: 1.5rem;
      }

      /* Larger touch targets for mobile nav */
      .nav-link {
        padding: 10px 14px;
        font-size: 15px;
      }

      .nav-children .nav-link {
        padding: 8px 14px;
        font-size: 14px;
      }
    }

    /* Sidebar overlay on mobile */
    .sidebar-overlay {
      display: none;
      position: fixed;
      top: var(--header-height);
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.3);
      z-index: 40;
    }

    .sidebar-overlay.open {
      display: block;
    }

    /* Syntax highlighting - Rouge */
    .highlight .c { color: #998; font-style: italic }
    .highlight .err { color: #a61717; background-color: #e3d2d2 }
    .highlight .k { font-weight: bold }
    .highlight .o { font-weight: bold }
    .highlight .cm { color: #998; font-style: italic }
    .highlight .cp { color: #999; font-weight: bold }
    .highlight .c1 { color: #998; font-style: italic }
    .highlight .cs { color: #999; font-weight: bold; font-style: italic }
    .highlight .gd { color: #000; background-color: #fdd }
    .highlight .gd .x { color: #000; background-color: #faa }
    .highlight .ge { font-style: italic }
    .highlight .gr { color: #a00 }
    .highlight .gh { color: #999 }
    .highlight .gi { color: #000; background-color: #dfd }
    .highlight .gi .x { color: #000; background-color: #afa }
    .highlight .go { color: #888 }
    .highlight .gp { color: #555 }
    .highlight .gs { font-weight: bold }
    .highlight .gu { color: #aaa }
    .highlight .gt { color: #a00 }
    .highlight .kc { font-weight: bold }
    .highlight .kd { font-weight: bold }
    .highlight .kp { font-weight: bold }
    .highlight .kr { font-weight: bold }
    .highlight .kt { color: #458; font-weight: bold }
    .highlight .m { color: #099 }
    .highlight .s { color: #d14 }
    .highlight .na { color: #008080 }
    .highlight .nb { color: #0086B3 }
    .highlight .nc { color: #458; font-weight: bold }
    .highlight .no { color: #008080 }
    .highlight .ni { color: #800080 }
    .highlight .ne { color: #900; font-weight: bold }
    .highlight .nf { color: #900; font-weight: bold }
    .highlight .nn { color: #555 }
    .highlight .nt { color: #000080 }
    .highlight .nv { color: #008080 }
    .highlight .ow { font-weight: bold }
    .highlight .w { color: #bbb }
    .highlight .mf { color: #099 }
    .highlight .mh { color: #099 }
    .highlight .mi { color: #099 }
    .highlight .mo { color: #099 }
    .highlight .sb { color: #d14 }
    .highlight .sc { color: #d14 }
    .highlight .sd { color: #d14 }
    .highlight .s2 { color: #d14 }
    .highlight .se { color: #d14 }
    .highlight .sh { color: #d14 }
    .highlight .si { color: #d14 }
    .highlight .sx { color: #d14 }
    .highlight .sr { color: #009926 }
    .highlight .s1 { color: #d14 }
    .highlight .ss { color: #990073 }
    .highlight .bp { color: #999 }
    .highlight .vc { color: #008080 }
    .highlight .vg { color: #008080 }
    .highlight .vi { color: #008080 }
    .highlight .il { color: #099 }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="docs-header">
    <div class="docs-header__left">
      <button class="menu-button" id="menuButton" aria-label="Toggle menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 12h18M3 6h18M3 18h18"/>
        </svg>
      </button>
      <a href="{% if current_lang == 'es' %}{{ '/guia/' | relative_url }}{% else %}{{ '/docs/' | relative_url }}{% endif %}" class="docs-header__brand">
        <svg class="docs-header__logo" viewBox="0 0 764 435" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="Telar"><path d="M242.595 20.0156H186.697V145.107H271.366V0H290.849V145.107H415.474L436.075 2.96484L436.241 2.98926V0H492.537V4.21582L514.997 145.107H588.656V9.76758H588.759V0H688.852L690.245 0.00195312L647.461 145.107H764V159.758H648.257L704.296 434.385H684.747L628.924 159.758H608.138L608.136 434.616H588.656V159.758H517.333L561.112 434.385H541.034L497.158 159.758H433.495L393.624 434.385H373.546L413.35 159.758H290.849V413.923H347.034V433.938H271.173V413.923H271.366V159.758H186.697V413.923H242.595V433.938H166.733V159.758H118.769V433.733H98.8047V159.758H0V145.107H98.8047V20.0225H30.6152V0H242.595V20.0156ZM118.769 145.107H166.733V20.0225H118.769V145.107ZM435.622 145.107H494.817L474.832 20.0156H453.782L435.622 145.107ZM608.138 145.107H626.642L663.476 20.0156H608.139L608.138 145.107Z" fill="#FFF1E6"/><mask id="mask0_docs" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="764" height="435"><path d="M242.595 20.0156H186.697V145.107H271.366V0H290.849V145.107H415.474L436.075 2.96484L436.241 2.98926V0H492.537V4.21582L514.997 145.107H588.656V9.76758H588.759V0H688.852L690.245 0.00195312L647.461 145.107H764V159.758H648.257L704.296 434.385H684.747L628.924 159.758H608.138L608.136 434.616H588.656V159.758H517.333L561.112 434.385H541.034L497.158 159.758H433.495L393.624 434.385H373.546L413.35 159.758H290.849V413.923H347.034V433.938H271.173V413.923H271.366V159.758H186.697V413.923H242.595V433.938H166.733V159.758H118.769V433.733H98.8047V159.758H0V145.107H98.8047V20.0225H30.6152V0H242.595V20.0156ZM118.769 145.107H166.733V20.0225H118.769V145.107ZM435.622 145.107H494.817L474.832 20.0156H453.782L435.622 145.107ZM608.138 145.107H626.642L663.476 20.0156H608.139L608.138 145.107Z" fill="#D9645A"/></mask><g mask="url(#mask0_docs)"><rect y="145" width="98.8" height="15" fill="#C6D0F8"/><mask id="path-4-outside-1_docs" maskUnits="userSpaceOnUse" x="118" y="145" width="154" height="15" fill="black"><rect fill="white" x="118" y="145" width="154" height="15"/><path d="M119 145H271.35V160H119V145Z"/></mask><path d="M119 145H271.35V160H119V145Z" fill="#C6D0F8"/><path d="M119 160H119.2V145H119H118.8V160H119Z" fill="#2D2598" mask="url(#path-4-outside-1_docs)"/><path d="M290.851 160H497.199L494.797 145H290.851V160Z" fill="#C6D0F8"/><path d="M626.621 145H515L517.363 159.945H628.949L626.621 145Z" fill="#C6D0F8"/><path d="M647.5 145H764V160H648.316L646.5 152.5L647.5 145Z" fill="#C6D0F8"/></g></svg>
        <span class="docs-header__title" data-lang="en">Docs</span>
        <span class="docs-header__title" data-lang="es">Documentaci√≥n</span>
      </a>
    </div>

    <div class="docs-header__center">
      <div class="lang-toggle">
        <button id="btn-en" {% if current_lang == "en" %}class="active"{% endif %} data-href="{% if current_lang == 'en' %}{{ page.url | relative_url }}{% else %}{{ other_url }}{% endif %}" onclick="switchLang('en', this)">EN</button>
        <button id="btn-es" {% if current_lang == "es" %}class="active"{% endif %} data-href="{% if current_lang == 'es' %}{{ page.url | relative_url }}{% else %}{{ other_url }}{% endif %}" onclick="switchLang('es', this)">ES</button>
      </div>
    </div>

    <div class="docs-header__right">
      <nav class="aux-links">
        <a href="{{ '/' | relative_url }}"><span data-lang="en">Telar Home</span><span data-lang="es">Inicio</span></a>
        <a href="https://github.com/UCSB-AMPLab/telar"><span data-lang="en">GitHub Repo</span><span data-lang="es">Repositorio GitHub</span></a>
        <a href="https://ampl.clair.ucsb.edu/telar"><span data-lang="en">Demo Site</span><span data-lang="es">Sitio de Demo</span></a>
      </nav>
      <!-- Mobile language toggle -->
      <div class="lang-toggle" style="display: none;" id="mobileLangToggle">
        <button id="btn-en-mobile" {% if current_lang == "en" %}class="active"{% endif %} data-href="{% if current_lang == 'en' %}{{ page.url | relative_url }}{% else %}{{ other_url }}{% endif %}" onclick="switchLang('en', this)">EN</button>
        <button id="btn-es-mobile" {% if current_lang == "es" %}class="active"{% endif %} data-href="{% if current_lang == 'es' %}{{ page.url | relative_url }}{% else %}{{ other_url }}{% endif %}" onclick="switchLang('es', this)">ES</button>
      </div>
    </div>
  </header>

  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- Sidebar -->
  <aside class="docs-sidebar" id="sidebar">
    <div id="search" class="docs-search"></div>
    <nav class="docs-nav">
      {% include docs/nav.html %}
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="docs-main">
    <article class="docs-content" data-pagefind-body>
      {{ content }}

      <footer class="docs-footer">
        <p>{{ site.footer_content }}</p>
      </footer>
    </article>
  </main>

  <script>
    // Initialize Pagefind search
    window.addEventListener('DOMContentLoaded', function() {
      if (typeof PagefindUI !== 'undefined') {
        new PagefindUI({
          element: "#search",
          showSubResults: true,
          showImages: false,
          pageSize: 5
        });
      }
    });

    // Switch language - navigates to equivalent page
    function switchLang(lang, btn) {
      localStorage.setItem('telar-lang', lang);
      const href = btn.getAttribute('data-href');
      if (href && href !== window.location.pathname) {
        window.location.href = href;
      }
    }

    // Set language display (for sidebar filtering)
    function setLangDisplay(lang) {
      document.documentElement.lang = lang;
      document.querySelectorAll('[id^="btn-en"]').forEach(btn => {
        btn.classList.toggle('active', lang === 'en');
      });
      document.querySelectorAll('[id^="btn-es"]').forEach(btn => {
        btn.classList.toggle('active', lang === 'es');
      });
    }

    // Initialize - set display based on current page language
    (function() {
      // Page lang is set by Liquid, just sync the localStorage
      const pageLang = document.documentElement.lang;
      localStorage.setItem('telar-lang', pageLang);
      setLangDisplay(pageLang);
    })();

    // Mobile menu toggle
    const menuButton = document.getElementById('menuButton');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebarOverlay');
    const mobileLangToggle = document.getElementById('mobileLangToggle');

    function toggleMenu() {
      sidebar.classList.toggle('open');
      overlay.classList.toggle('open');
    }

    menuButton.addEventListener('click', toggleMenu);
    overlay.addEventListener('click', toggleMenu);

    // Show mobile lang toggle on small screens
    function checkMobile() {
      if (window.innerWidth <= 768) {
        mobileLangToggle.style.display = 'flex';
      } else {
        mobileLangToggle.style.display = 'none';
        sidebar.classList.remove('open');
        overlay.classList.remove('open');
      }
    }

    window.addEventListener('resize', checkMobile);
    checkMobile();
  </script>
</body>
</html>
